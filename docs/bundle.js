(()=>{"use strict";var t,e,i,r,n={945:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(607),n=function(){function t(t){this.left=0,this.top=2*t.height/3,this.width=t.width,this.height=t.height/3,this.color=r.colors.lightslategray}return t.prototype.draw=function(t){t.fillStyle=this.color,t.fillRect(this.left,this.top,this.width,this.height)},t}();e.default=n},743:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(607);e.default=function(t,e){var i=this;this.setY=function(t){i.top=t,i.bottom=i.top+i.height},this.setX=function(t){i.left=t,i.right=i.left+i.width},this.moveX=function(t){i.left+=t,i.right+=t},this.moveY=function(t){i.top+=t,i.bottom+=t},this.getEyeX=function(){return(i.left+3*i.right)/4},this.getEyeY=function(){return(6*i.top+5*i.bottom)/11},this.update=function(t,e){i.isGrounded||(i.moveY(-i.vy),i.vy-=t.width/400,i.bottom>e.top&&(i.setY(e.top-i.height),i.isGrounded=!0,i.vy=0))},this.draw=function(t){t.fillStyle=i.color,t.fillRect(i.left,i.top,i.width,i.height),i.isGrounded&&!i.isHit?(t.beginPath(),t.arc(i.getEyeX(),i.getEyeY(),i.width/6,0,2*Math.PI),t.fillStyle=i.outerEyeColor,t.fill(),t.beginPath(),t.arc(i.getEyeX()+i.width/12,i.getEyeY(),i.width/15,0,2*Math.PI),t.fillStyle=i.innerEyeColor,t.fill()):(t.strokeStyle=i.innerEyeColor,t.lineWidth=i.width/30,t.beginPath(),t.moveTo(i.getEyeX()-i.width/6,i.getEyeY()-i.width/8),t.lineTo(i.getEyeX()+i.width/6,i.getEyeY()),t.lineTo(i.getEyeX()-i.width/6,i.getEyeY()+i.width/8),t.stroke())},this.width=t.width/40*3,this.height=t.height/40*3,this.left=t.width/5,this.top=e.top-this.height,this.right=this.left+this.width,this.bottom=e.top,this.color=r.colors.darkgray,this.outerEyeColor=r.colors.whitesmoke,this.innerEyeColor=r.colors.black,this.vy=0,this.isGrounded=!0,this.isHit=!1}},498:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(607);e.default=function(t,e,i){var n=this;this.update=function(t,e){n.speed=(5+Math.floor(e/500))/400*t.width,n.left-=n.speed,n.right-=n.speed},this.draw=function(t){t.fillStyle=n.color,t.fillRect(n.left,n.top,n.width,n.height)},this.width=t.width/10,this.height=t.height/20,this.left=t.width,this.top=i.top-this.height,this.right=this.left+this.width,this.bottom=i.top,this.color=r.colors.gray,this.speed=(5+Math.floor(e/500))/400*t.width}},385:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,i,r,n){void 0===n&&(n=-1);var o=this;this.update=function(t,e){o.speed=(5+Math.floor(e/500))/400*t.width,o.left-=o.speed,o.right-=o.speed},this.draw=function(t){t.globalAlpha=.5,t.fillStyle=o.color,t.beginPath(),t.moveTo(o.left,o.bottom),t.lineTo(o.left+o.width/2,o.top),t.lineTo(o.right,o.bottom),t.closePath(),t.fill(),t.globalAlpha=1},this.color=r,this.height=t.height/10*(1+Math.random()),this.width=2*this.height/Math.tan(4*Math.PI/10),this.top=e.top-this.height,this.bottom=e.top,this.left=-1===n?t.width:n,this.right=this.left+this.width,this.speed=(5+Math.floor(i/500))/400*t.width}},550:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={black:"#333333",white:"#ffffff",lightskyblue:"#87CEFA",whitesmoke:"#F5F5F5",lightgray:"#D3D3D3",darkgray:"#A9A9A9",silver:"#C0C0C0",slategray:"#708090",lightslategray:"#778899",gray:"#808080",treegreen1:"#CCCC99",treegreen2:"#669966"}},80:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=i(607);e.default=function(t,e,i,n,o,l,a){void 0===a&&(a=51),(0,r.resetCanvas)(t,e,r.colors.whitesmoke),i.draw(e);for(var h=0,s=l;h<s.length;h++)s[h].draw(e);for(var d=0,f=o;d<f.length;d++)f[d].draw(e);n.draw(e),e.globalAlpha=.01*Math.min(a,50),e.fillStyle=r.colors.whitesmoke,e.fillRect(0,0,t.width,t.height),e.globalAlpha=1}},738:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,r){e.fillStyle=r,e.font="".concat(t.width/20,"px sanserif"),e.textBaseline="top",e.textAlign="right",e.fillText("".concat(i),t.width-10,10)}},87:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=e.width/200;return[t.right>=e.left+i&&t.right<=e.right-i||t.left>=e.left+i&&t.left<=e.right-i,e.bottom>=t.top&&e.bottom<=t.bottom||e.top>=t.top&&e.top<=t.bottom]}},176:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){e.fillStyle=i,e.fillRect(0,0,t.width,t.height)}},487:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.width=e.clientWidth,t.height=e.clientHeight}},605:function(t,e,i){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(80)),l=i(607);e.default=function(t,e){for(var i=!1,n=50,a=0,h=new l.Ground(t),s=new l.Player(t,h),d=[],f=[],u=0;u<80;u++)if(0===a){var c=100*Math.random();c<5&&(a=30,c<3?f.push(new l.Tree(t,h,0,l.colors.treegreen1,u/80*t.width)):f.push(new l.Tree(t,h,0,l.colors.treegreen2,u/80*t.width)))}else a--;var g=0,v=[!1,!1],w=function(e){e.preventDefault(),s.isGrounded&&(s.vy+=t.width/40*1.1,s.isGrounded=!1)},p=function(){s.isGrounded&&(s.vy+=t.width/40*1.1,s.isGrounded=!1)},y=function(e){" "===e.key&&s.isGrounded&&(s.vy+=t.width/40*1.1,s.isGrounded=!1)},b=function(i,r){void 0===r&&(r=-1),-1===r?((0,o.default)(t,e,h,s,d,f),e.fillStyle=l.colors.black,e.font="".concat(t.width/20,"px sans-serif"),e.textBaseline="middle",e.textAlign="center",e.fillText("- tap to start -",t.width/2,t.height/4*3)):((0,o.default)(t,e,h,s,d,f,i?r:51),e.globalAlpha=.02*r,e.fillStyle=l.colors.black,e.font="".concat(t.width/20+(i?50-r:0)/3,"px sans-serif"),e.textBaseline="middle",e.textAlign="center",e.fillText("- tap to start -",t.width/2,t.height/6*5),e.globalAlpha=1)},m=function(t){" "===t.key&&_()},_=function(){if(!i){i=!0,t.removeEventListener("touchstart",_),t.removeEventListener("click",_),window.removeEventListener("keydown",m);var o=0,u=setInterval((function(){b(!0,50-2*o),++o>24&&clearInterval(u)}),20);setTimeout((function(){t.addEventListener("touchstart",w),t.addEventListener("click",p),window.addEventListener("keydown",y);var o=setInterval((function(){if(i){for(var u=0,c=f=f.filter((function(t){return t.right>0}));u<c.length;u++)c[u].update(t,g);d=d.filter((function(t){return t.right>0}));var b,m=r({},s);s.update(t,h);for(var _=0,E=d;_<E.length;_++){var P=E[_];v=(0,l.judgeHit)(m,P),P.update(t,g);var k=(0,l.judgeHit)(s,P);k[0]&&k[1]&&(i=!1,s.isHit=!0,v[0]||s.setX(P.left-s.width),v[1]||s.setY(P.top-s.height))}(0,l.resetCanvas)(t,e,l.colors.whitesmoke),h.draw(e);for(var x=0,M=f;x<M.length;x++)M[x].draw(e);s.draw(e);for(var j=0,O=d;j<O.length;j++)(P=O[j]).draw(e);(0,l.drawScore)(t,e,g,l.colors.silver),g++,0===a?(b=100*Math.random())<5&&(a=30,b<3?f.push(new l.Tree(t,h,g,l.colors.treegreen1)):f.push(new l.Tree(t,h,g,l.colors.treegreen2))):a--,0===n?(b=100*Math.random())<3&&(d.push(new l.Rock(t,g,h)),n=50):n--}else t.removeEventListener("touchstart",w),t.removeEventListener("click",p),window.removeEventListener("keydown",y),clearInterval(o),(0,l.showResult)(t,e,g,s,h,f,d)}),20)}),500)}},E=0,P=setInterval((function(){b(!1,2*E),++E>24&&clearInterval(P)}),20);setTimeout((function(){t.addEventListener("touchstart",_),t.addEventListener("click",_),window.addEventListener("keydown",m)}),500)}},657:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(738)),o=i(607),l=function(t,e,i){e.globalAlpha=.02*Math.min(i,50),e.fillStyle=o.colors.black,e.font="".concat(t.width/12,"px sans-serif"),e.textBaseline="bottom",e.textAlign="center",e.fillText("Game Over",t.width/2,t.height/4),e.globalAlpha=1},a=function(t,e,i,r){e.globalAlpha=.04*Math.min(25,i),e.fillStyle=o.colors.black,e.font="".concat(t.width/15,"px sans-serif"),e.textBaseline="bottom",e.textAlign="right",e.fillText("Score : ",t.width/2,t.height/9*5),e.font="".concat(t.width/10,"px sans-serif"),e.textBaseline="bottom",e.textAlign="left",e.fillText("".concat(r),t.width/2,t.height/9*5),e.globalAlpha=1},h=function(t,e,i){e.globalAlpha=.04*Math.min(25,i),e.fillStyle=o.colors.black,e.font="".concat(t.width/20,"px sans-serif"),e.textBaseline="middle",e.textAlign="center",e.fillText("- tap to continue -",t.width/2,t.height/6*5),e.globalAlpha=1};e.default=function(t,e,i,r,s,d,f){var u=function(){t.removeEventListener("click",c),t.removeEventListener("touchstart",g),window.removeEventListener("keydown",v);var u=0,w=setInterval((function(){(0,o.defaultDraw)(t,e,s,r,f,d),l(t,e,50-2*u),a(t,e,25-u,i),h(t,e,25-u),n.default,u>24&&clearInterval(w),u++}),20);setTimeout((function(){(0,o.run)(t,e)}),700)},c=function(){u()},g=function(){u()},v=function(t){" "===t.key&&u()},w=0,p=setInterval((function(){(0,o.defaultDraw)(t,e,s,r,f,d,w),l(t,e,w),w>60&&a(t,e,w-60,i),w>95&&h(t,e,w-95),w>130&&(clearInterval(p),t.addEventListener("touchstart",g),t.addEventListener("click",c),window.addEventListener("keydown",v)),w++}),20)}},607:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultDraw=e.showResult=e.run=e.drawScore=e.judgeHit=e.resetCanvas=e.resizeCanvas=e.Ground=e.Tree=e.Rock=e.Player=e.colors=void 0;var n=i(550);Object.defineProperty(e,"colors",{enumerable:!0,get:function(){return r(n).default}});var o=i(743);Object.defineProperty(e,"Player",{enumerable:!0,get:function(){return r(o).default}});var l=i(498);Object.defineProperty(e,"Rock",{enumerable:!0,get:function(){return r(l).default}});var a=i(385);Object.defineProperty(e,"Tree",{enumerable:!0,get:function(){return r(a).default}});var h=i(945);Object.defineProperty(e,"Ground",{enumerable:!0,get:function(){return r(h).default}});var s=i(487);Object.defineProperty(e,"resizeCanvas",{enumerable:!0,get:function(){return r(s).default}});var d=i(176);Object.defineProperty(e,"resetCanvas",{enumerable:!0,get:function(){return r(d).default}});var f=i(87);Object.defineProperty(e,"judgeHit",{enumerable:!0,get:function(){return r(f).default}});var u=i(738);Object.defineProperty(e,"drawScore",{enumerable:!0,get:function(){return r(u).default}});var c=i(605);Object.defineProperty(e,"run",{enumerable:!0,get:function(){return r(c).default}});var g=i(657);Object.defineProperty(e,"showResult",{enumerable:!0,get:function(){return r(g).default}});var v=i(80);Object.defineProperty(e,"defaultDraw",{enumerable:!0,get:function(){return r(v).default}})}},o={};r=function t(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,t),r.exports}(607),e=(t=document.getElementById("canvas")).getContext("2d"),i=document.getElementById("canvas-container"),(0,r.resizeCanvas)(t,i),(0,r.run)(t,e)})();